# 프로세스 vs 스레드

**프로세스** : 실행 중인 프로그램

*운영체제는 프로세스마다  Code/Data/Stack/Heap의 메모리 영역을 독립적으로 할당해주기 때문에 다른 프로세스에는 접근이 불가능하다*

<img src="https://miro.medium.com/max/875/0*jvlxE7iwWWLvzxgo.png" alt="img" style="zoom: 50%;" />

**스레드** : 프로세스의 실행 단위

*이와 다르게 스레드는 메모리를 공유가능하다*

<img src="https://miro.medium.com/max/875/0*39Jqwl1DcgCaTEGr.png" alt="img" style="zoom: 50%;" />



# 멀티 프로세스 vs 멀티 스레드

### 멀티 프로세스

1. 개념 

   두개 이상 다수의 프로세스(`CPU`)가 협력적으로 하나 이상의 작업(`Task`)을 동시에 처리하는 것이며 각 프로세스 간에는 메모리가 **독립된 공간**으로 가져야 할 경우

2. 장점

   - 독립된 구조로 안정성이 높다

   - 프로세스 중 하나가 문제가 생겨도 다른 프로세스에 영향을 주지 않는다
   - 여러개의 프로세스가 동일한 데이터를 사용하고, 이러한 데이터를 하나의 디스크에 두고 모든 프로세스가 공유하면 비용적 문제를 해결할 수 있다

3. 단점
   - 독립된 메모리 영역이기 때문에 잦은 Context Switching으로 오버헤드가 발생하여 성능 저하가 발생할 수 있다
   - Context Switching 과정에서 캐시 메모리 초기화등 무거운 작업이 진행되어 시간이 소모되는 오버헤드 발생

4. Context Switching
   - CPU에서 여러 프로세스를 돌아가면서 처리하는 과정




### 멀티 스레드

1. 개념
   - 하나의 프로세스에 여러 스레드로 자원을 공유하며 작업을 수행하는 기능

2. 장점

   - 시스템 자원소모 감소(자원의 효율성 증대)
     - 프로세스를 생성하여 자원을 할당하는 시스템 콜이 줄어 자원으 효율적으로 관리 할 수 있다
   - 시스템 처리율 향상(처리비용 감소)
     - 스레드 간 데이터를 주고 받는 것이 간단해지고 시스템 자원 소모가 줄어든다
     - 스레드 사이 작업량이 작아 context Switching 이 빠르다

   - 간단한 통신 방법으로 프로그램 응답 시간 단축
     - 스레드는 프로세스 내 스택영역을 제외한 메모리 영역을 공유하기에 통신 비용이 적다
     - 힙 영역을 공유하므로 데이터를 주고 받을 수 있다

3. 문제점

   - 자원을 공유하기에 동기화 문제가 발생할 수 있다. (병목현상, 데드락 등)

   - 주의 깊게 설꼐가 필요하고 디버깅이 어렵다. (불 필요 부분 까지 동기화하면, 대기시간으로 인해 성능저하 발생)

   - 하나의 스레드에 문제가 생기면 전체 프로세스가 영향을 받는다

   - 단일 프로세스 시스템의 경우 효과를 기대하기 어렵다.

     

### 멀티 프로세스 vs 멀티 스레드

- 멀티 프로세스는 하나의 프로세스가 죽더라도 다른 프로세스에 영향을 주지 않아 안정성이 높지만, 멀티 스레드보다 많은 메모리공간과 CPU 시간을 차지하는 단점이 있다.

- 멀티 스레드는 멀티 프로세스보다 적은 메모리 공간을 차지하고 `Context Switching`이 빠른 장점이 있지만, 동기화 문제와 하나의 스레드 장애로 전체 스레드가 종료 될 위험을 갖고 있다.

  

### 왜 멀티 프로세스로 할 수 있는 작업들을 굳이 하나의 프로세스에서 스레드로 나눠가며 할까?

- 운영체제가 시스템 자원을 효율적으로 관리하기 위해 스레드를 사용한다.
- 멀티 프로세스로 실행되는 작업을 멀티 스레드로 실행할 경우, 프로세스를 생성하여 자원을 할당하는 시스템 콜이 줄어들어 자원을 효율적으로 관리할 수 있다.
- 또한, 프로세스 간의 통신보다 스레드 간의 통신 비용이 적으므로 작업들 간 통신의 부담이 줄어든다. (처리비용 감소. 프로세스는 독립구조이기 때문)



### 그렇다면 무조건 멀티 스레드가 좋을까?

- 스레드를 활용하면 자원의 효율성이 증가하기도 하지만, 스레드 간의 자원 공유는 전역 변수를 이용하므로 동기화 문제가 발생 할 수 있으므로 프로그래머의 주의가 필요하다.

  

출처 https://wooody92.github.io/os/%EB%A9%80%ED%8B%B0-%ED%94%84%EB%A1%9C%EC%84%B8%EC%8A%A4%EC%99%80-%EB%A9%80%ED%8B%B0-%EC%8A%A4%EB%A0%88%EB%93%9C/